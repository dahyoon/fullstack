<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue 인스턴스</title>
  </head>
  <body>
    <div id="app">
      <h1>04 Vue 인스턴스</h1>
      <h2>4.4 메서드</h2>
      <ul>
        <li>Vue 인스턴스에서 사용할 메서드를 등록하는 옵션임</li>
        <li>
          등록된 메서드는 Vue 인스턴스를 이용해 <b>직접 호출</b> 가능,
          <b>디렉티브 표현식, 콧수염 (Mustache) 표현식</b>에서도 사용 가능,
          <b>이벤트 핸들러</b>로도 이용 가능
        </li>
        <li style="color: #5dade2">
          메서드 사용 방법:
          <ul>
            <li>methods 옵션 추가, 내부에 함수들 작성</li>
          </ul>
        </li>
        <li>
          메서드는 템플릿에서 {{sum()}}과 같이 메서드의 호출 구문을 사용했기에
          템플릿으로 렌더링할 때 호출됨
        </li>
        <li>
          반면 계산된 속성(computed)은 데이터가 변경되면 미리 호출하여 캐싱해둔
          값을 렌더링할 때 반복적으로 사용함
          <ul>
            <li>
              그러므로
              <span style="color: tomato"
                >동일한 값을 같은 화면에 여러 번 출력</span
              >해야 될 경우
              <span style="color: tomato"
                >계산된 속성 (computed) 사용 권장</span
              >
            </li>
          </ul>
        </li>
        <li>
          메서드 작성 시 주의
          <ul>
            <li>
              <span style="color: tomato"
                >화살표 함수를 메서드로 등록할 경우</span
              >
              <ul>
                <li>컴포넌트 인스턴스 this에 접근 불가능</li>
                <li>
                  계산된 속성과 같이 작성할 수 있지 않을까 생각되지만 오작동할
                  것
                </li>
                <li>
                  그러므로
                  <b
                    >메서드가 컴포넌트 인스턴스에 접근해야 한다면 전통적인 js
                    함수로 작성 필수</b
                  >
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
      <hr />
      1보다 큰 수: <input type="text" id="a" v-model.number="num" /> <br />
      1부터 입력한 값까지의 합: <span>{{sum()}}</span><br />
      1부터 입력한 값까지의 합: <span>{{sum()}}</span><br />
      1부터 입력한 값까지의 합: <span>{{sum()}}</span><br />
    </div>
    <script type="text/javascript" src="https://unpkg.com/vue"></script>
    <script type="text/javascript">
      var vm = Vue.createApp({
        name: "App",
        data() {
          return { num: 0 };
        },
        methods: {
          sum() {
            console.log("## num: " + this.num);
            let n = parseInt(this.num);
            if (Number.isNaN(n)) return 0;
            return (n * (n + 1)) / 2;
          },
        },
      }).mount("#app");
    </script>
  </body>
</html>
